# Velero Helm Chart Values
# Customize these values for your environment

# Default configuration
configuration:
  provider: aws  # aws, azure, gcp, minio
  backupStorageLocation:
    bucket: velero-backups
    config:
      region: us-west-2
      s3ForcePathStyle: "false"  # Set to "true" for MinIO
  volumeSnapshotLocation:
    config:
      region: us-west-2
  # Enable Restic for file-level backups
  restic:
    enabled: true
  # Features
  features: ""
  # Log level
  logLevel: info

# Credentials
credentials:
  useSecret: true
  existingSecret: cloud-credentials
  # Or provide inline (not recommended for production)
  # secretContents:
  #   cloud: |
  #     [default]
  #     aws_access_key_id=YOUR_ACCESS_KEY
  #     aws_secret_access_key=YOUR_SECRET_KEY

# Service account
serviceAccount:
  server:
    create: true
    name: velero
    annotations: {}
  # For AWS, add IAM role annotation:
  # annotations:
  #   eks.amazonaws.com/role-arn: arn:aws:iam::ACCOUNT_ID:role/velero-role

# Restic daemonset configuration
restic:
  enabled: true
  podVolumePath: /var/lib/kubelet/pods
  privileged: true
  resources:
    limits:
      cpu: "1"
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

# Velero server configuration
deployments:
  server:
    replicas: 1
    image:
      repository: velero/velero
      tag: v1.12.0
      pullPolicy: IfNotPresent
    resources:
      limits:
        cpu: "1"
        memory: 512Mi
      requests:
        cpu: 500m
        memory: 128Mi
    # Additional environment variables
    extraEnvVars: []
    # Additional volumes
    extraVolumes: []
    # Additional volume mounts
    extraVolumeMounts: []

# Init containers
initContainers:
  - name: velero-plugin-for-aws
    image: velero/velero-plugin-for-aws:v1.8.0
    imagePullPolicy: IfNotPresent
    volumeMounts:
      - mountPath: /target
        name: plugins

# Additional plugins (uncomment as needed)
# - name: velero-plugin-for-csi
#   image: velero/velero-plugin-for-csi:v0.5.0
#   imagePullPolicy: IfNotPresent
#   volumeMounts:
#     - mountPath: /target
#       name: plugins

# Metrics
metrics:
  enabled: false
  serviceMonitor:
    enabled: false

# Security context
securityContext:
  runAsUser: 65534
  runAsGroup: 65534
  fsGroup: 65534

# Pod disruption budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1

# Network policy
networkPolicy:
  enabled: false

# Tolerations
tolerations: []

# Node selector
nodeSelector: {}

# Affinity
affinity: {}

